name: "diw-ut1"

services:
  node-diw:   # Nom del servei
    image: node:22.12   # Imatge de docker que usar
    tty: true        # Mant√© una terminal activa (per fer feina de forma interactiva)
    stdin_open: true # Permet usar comandes al contenidor
    working_dir: /appdiw   # Carpeta de feina dins el contenidor
    volumes:
      - ./vite:/appdiw  # Monta la carpeta local "programa" a la ruta "/appdiw" del contenidor
    ports:
      - "8082:5173"
  scss:
    # image: node:18
    build:
      context: .
      dockerfile: Dockerfile-scss
    tty: true
    stdin_open: true
    working_dir: /app
    volumes:
      - ./Exercicis:/app      #Provar funcionament del DOKER-COMPOSE. Hem create aquest docker-compose,
                              #hem entrat dins el contenidor i hem fet un npm install per generar la carpeta
                              #node-modules i per iniciar la pagina npm run start

                              #tenir en compte que si eliminam el contenidor, per que funcioni una altra vegada hauram de
                              #tornar a fer npm insall i npm run start, per aixo llo recomenable es fer un
                              #dockerfile per que ho faci automaticament
  web:
    image: httpd
    tty: true
    stdin_open: true
    working_dir: /usr/local/apache2/htdocs/
    volumes:
      - ./Exercicis:/usr/local/apache2/htdocs/
    ports:
      - "84:80"
  qr:
      image: node:22
      tty: true
      stdin_open: true
      working_dir: /app
      volumes:
        - ./qr-app:/app
      environment:
        - PORT=3004
      ports:
        - "3009:3004"

  ticketmaster:
    image: node:22
    tty: true
    stdin_open: true
    working_dir: /appdiw
    volumes:
      - ./ticketmaster_prova:/appdiw
    ports:
      - "8086:3000"
